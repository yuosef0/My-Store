-- ============================================
-- ๐ ุงูุจุญุซ ุนู ุญุณุงุจ ุงูุฃุฏูู ุงูุฎุงุต ุจู
-- ============================================

-- 1๏ธโฃ ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู ูู auth.users
-- ============================================
-- ุดุบูู ูุฐุง ุงูุงุณุชุนูุงู ุฃููุงู ูุฑุคูุฉ ุฌููุน ุงูุญุณุงุจุงุช ุงููุณุฌูุฉ:

SELECT
    id,
    email,
    created_at,
    email_confirmed_at,
    last_sign_in_at
FROM auth.users
ORDER BY created_at DESC;

-- ุงูุณุฎ ุงูู id ุงูุฎุงุต ุจุญุณุงุจู (ุงูููุฌูุฏ ุจุฌุงูุจ ุฅููููู)


-- 2๏ธโฃ ุงูุชุญูู ูู ุชุทุงุจู user_id ูู ุฌุฏูู admins
-- ============================================
-- ุจุนุฏ ูุง ุชูุณุฎ ุงูู id ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉุ ุงุณุชุจุฏู YOUR_USER_ID_HERE ุจุงูู id:

SELECT * FROM admins
WHERE user_id = 'YOUR_USER_ID_HERE';  -- ๐ ุถุน user_id ููุง

-- ุฅุฐุง ูู ุชุธูุฑ ูุชุงุฆุฌุ ูุนูุงูุง ุงูู user_id ูู ุฌุฏูู admins ุบูุฑ ุตุญูุญ


-- 3๏ธโฃ ุนุฑุถ ุฌููุน ุงูุฃุฏูู ูุน ูุญุงููุฉ ุฑุจุทูู ุจุงูุฅููููุงุช
-- ============================================
-- ูุฐุง ุงูุงุณุชุนูุงู ูุญุงูู ุงูุฑุจุท ุจูู ุงูุฌุฏูููู:

SELECT
    a.id as admin_id,
    a.user_id,
    a.role,
    a.is_active,
    a.created_at as admin_created_at,
    u.email,
    u.created_at as user_created_at
FROM admins a
LEFT JOIN auth.users u ON a.user_id = u.id
ORDER BY a.created_at DESC;

-- ุฅุฐุง ุธูุฑุช ุงููุชูุฌุฉ ุจุฏูู emailุ ูุนูุงูุง:
-- ุงูู user_id ูู ุฌุฏูู admins ูุง ูุชุทุงุจู ูุน ุฃู id ูู auth.users


-- 4๏ธโฃ ุญุฐู ุงูุตููู ุงูุฎุงุทุฆุฉ (ุงุฎุชูุงุฑู)
-- ============================================
-- ุฅุฐุง ูุงูุช ุฌููุน ุงูุตููู ูู ุฌุฏูู admins ูุง ุชุชุทุงุจู ูุน ุฃู user ูู auth.users
-- ููููู ุญุฐููุง ูุฅุนุงุฏุฉ ุฅุถุงูุฉ ููุณู ุจุดูู ุตุญูุญ:

-- ุชุญุฐูุฑ: ูุฐุง ุณูุญุฐู ุฌููุน ุงูุฃุฏูู ุงูููุฌูุฏูู!
-- DELETE FROM admins;


-- 5๏ธโฃ ุฅุถุงูุฉ ููุณู ูุฃุฏูู ุจุดูู ุตุญูุญ
-- ============================================
-- ุจุนุฏ ูุง ุชุนุฑู ุงูู user_id ุงูุตุญูุญ ูู ุงูุฎุทูุฉ 1ุ ุงุณุชุฎุฏูู ููุง:

INSERT INTO admins (user_id, role, is_active)
VALUES ('YOUR_CORRECT_USER_ID_HERE', 'super_admin', true)  -- ๐ ุถุน user_id ุงูุตุญูุญ
ON CONFLICT (user_id)
DO UPDATE SET
    is_active = true,
    role = 'super_admin';


-- 6๏ธโฃ ุงูุชุญูู ุงูููุงุฆู
-- ============================================
-- ุดุบูู ูุฐุง ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุนูููุฉ:

SELECT
    a.id,
    a.user_id,
    a.role,
    a.is_active,
    u.email,
    u.last_sign_in_at
FROM admins a
INNER JOIN auth.users u ON a.user_id = u.id
WHERE a.is_active = true;

-- ูุฌุจ ุฃู ุชุธูุฑ ุจูุงูุงุชู ูุน email ูุงุถุญ!


-- ============================================
-- ๐ ููุงุญุธุฉ ูููุฉ:
-- ============================================
-- ุฅุฐุง ูุงูุช ุฌููุน ุงูู user_id ูู ุฌุฏูู admins ุบูุฑ ุตุญูุญุฉ
-- (ูุง ุชุชุทุงุจู ูุน ุฃู id ูู auth.users)
-- ูุนูุงูุง ุชู ุฅุถุงูุฉ ุฃุฏูู ุจู user_id ุฎุงุทุฆ
-- ุงูุญู: ุงุญุฐู ุงูุตููู ุงูุฎุงุทุฆุฉ ูุฃุถู ููุณู ูู ุฌุฏูุฏ
-- ============================================
